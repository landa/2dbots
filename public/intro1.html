<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>2dBots &mdash; Introduction</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/7.13.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.13.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.13.1/firebase-database.js"></script>
    <script defer src="/__/firebase/7.13.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.13.1/firebase-storage.js"></script>
    <script defer src="/__/firebase/7.13.1/firebase-analytics.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <script defer src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script defer src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script>

    <script defer src="js/codemirror.js"></script>
    <script defer src="js/javascript.js"></script>

    <script defer src="js/constants.js"></script>
    <script defer src="js/utils.js"></script>
    <script defer src="js/robot.js"></script>
    <script defer src="js/simulation.js"></script>
    <script defer src="js/challenge.js"></script>

    <link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
    <link rel="manifest" href="img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#222222">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Paaji+2&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Domine&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/codemirror.css">
    <link rel="stylesheet" href="css/theme/ambiance.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/challenge.css">
  </head>
  <body>
    <header>
      <div class="navbar navbar-dark bg-dark">
        <div class="container d-flex justify-content-between pl-3 pr-3">
          <a href="/" class="navbar-brand d-flex align-items-center">
            <i class="fas fa-robot mr-3"></i>
            <strong>2dBots &mdash; Introduction</strong>
          </a>
        </div>
      </div>
    </header>

    <main role="main">

      <div class="container instructions">
        <section class="row justify-content-center px-xl-5 bg-dark robot-introduction robot-introduction-bumperbot">
          <div class="col-lg-12 col-xl-6">
            <h4>Our First Robot: <code>BumperBot</code></h4>
            <p>
              The first robot you'll learn to program is very simple. All it can do is move forward, turn left, turn right, and sense whether it can move forward or not by bumping into something.
            </p>
            <p>
              You can try to execute these commands on the <code>BumperBot</code> to the right. Press each button to issue these commands to the robot.

              <div class="control-buttons btn-group">
                <button class="btn btn-primary reset-button mr-2 button-turn-left">
                  turnLeft
                </button>
                <button class="btn btn-primary reset-button mr-2 button-turn-right">
                  turnRight
                </button>
                <button class="btn btn-warning reset-button mr-2 button-sense-forward">
                  canMoveForward?
                </button>
                <button class="btn btn-primary reset-button mr-2 button-move-forward">
                  moveForward
                </button>
              </div>

            </p>
          </div>
          <div class="col-lg-12 demo-container col-xl-6">
            <div class="card-body h-100 p-0">
              <div class="row h-100">
                <div class="simulation-container col-md-12 col-lg-12 px-0"></div>
                <div class="grid-container">
                [
                  [
                    [E, E, E, W, E],
                    [E, W, E, W, E],
                    [E, W, E, E, E],
                  ]
                ]
                </div>
                <div class="simulation-robots">
                </div>
              </div>
            </div>
          </div>
        </section>
        <section class="row bg-dark text-justify justify-content-center px-xl-5">
          <div class="col-lg-12 col-xl-6">
            <h4>Writing a JavaScript Generator Function</h4>
            <p>
              To write a program that controls the robot, you need to implement a <emph>generator function</emph> called <code>*produceNextMove</code>.
            </p>
            <p class="alert alert-primary">
              A generator function in JavaScript is something that produces items in a sequence. To make it produce items in a sequence, we use the <code>yield</code> keyword. In our case, we want to <code>yield</code> an action every time we want the robot to move.
            </p>
            <p class="alert alert-secondary">
              If you boil it down, a robot is actually just a brain that thinks for a while and eventually produces the next action to take. Our <code>Robot</code> is going to be controlled by a generator function that will do some thinking, then <code>yield</code> an action, repeatedly.
            </p>
            <br/>
            <h5>Generator Function Syntax</h5>
            <p>
              In JavaScript, generator functions have to look like what you see in the example robot implementation. That is, they have to be of the form:
            </p>
            <pre><code>
              *nameOfTheGeneratorFunction() {
                // code code code...
              }
            </code></pre>
            <p>
              Notice that they always start with a <code>*</code>, then the name of the function, then <code>()</code>. Then, there are opening and closing curly braces (<code>{</code> and <code>}</code>). In our case, the name of the function is <code>produceNextMove</code>.
            </p>
            <p>
              You should write all of your code in between the curly braces. It's very important that every opening curly brace has a matching closing curly brace, or else you'll get a <code>SyntaxError</code>.
            </p>
          </div>
          <div class="col-lg-12 col-xl-6">
            <h4>Making the <code>Robot</code> Move</h4>
            <p>
              Now that you've controlled the <code>BumperBot</code> manually, let's write a generator function that can control it for us.
            </p>
            <p>
              Here are snippets of code that make the robot perform an action:
              <ul>
                <li><code>yield this.moveForward</code> &mdash; Yield a move forward (if possible)</li>
                <li><code>yield this.turnRight</code> &mdash; Yield a 90 degree turn to the right</li>
                <li><code>yield this.turnLeft</code> &mdash; Yield a 90 degree turn to the left</li>
              </ul>
            </p>
            <p>
              You might be asking yourself why we have to type <code>this.</code> before our action. This is because we have to specify the object that our command should run on. The keyword <code>this</code> in our case means something like <emph>this <code>Robot</code></emph>. Commands are of the form <code>object</code>, then a dot, then the <code>command</code>. That's why, to yield a move forward, we yield <code>this.moveForward</code>.
            </p>
            <p>
              If you're new to this, it might not make complete sense, but it will become clearer later as you do more of these tutorials. For now, see if you can use the example provided here to solve the challenge below.
            </p>
            <div class="card border">
              <div class="card-header">
                Example Robot Implementation
              </div>
              <div class="card-body pt-0">
                <div class="example-container">
                  <textarea>
// Lines that start with // are comments.
// They're ignored by the computer.

*produceNextMove() {

  // Take three steps forward
  yield this.moveForward;
  yield this.moveForward;
  yield this.moveForward;

  // Turn 180 degrees
  yield this.turnRight;
  yield this.turnRight;

}</textarea>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="challenge-container row justify-content-center">
          <div class="challenge-question-container col-lg-12 col-xl-12">
            <div class="card border-secondary">
              <div class="card-header">
                <div class="float-left">
                  Challenge: Go around the map and reach the green target.
                </div>
                <div class="simulation-buttons btn-group float-right">
                  <div class="map-button btn-group mr-2">
                    <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Maps
                    </button>
                    <div class="dropdown-menu">
                    </div>
                  </div>
                  <button type="button" class="btn btn-secondary btn-sm hint-button mr-2" data-target="#hints-modal" data-toggle="modal">
                    Hints
                  </button>
                  <button class="btn btn-secondary btn-sm reset-button">
                    <i class="fas fa-redo"></i>
                  </button>
                  <button class="btn btn-success btn-sm run-button">
                    <i class="fas fa-play"></i>
                  </button>
                </div>
              </div>
              <div class="card-body p-0">
                <div class="row">
                  <div class="editor-container col-md-12 col-lg-6 pr-0">
                    <div class="editor-code-container"></div>
                    <div class="editor-output-container"></div>
                  </div>
                  <div class="simulation-container col-md-12 col-lg-6 px-0"></div>
                  <div class="grid-container">
                  [
                    [
                      [S, E, E, E, E, E, E],
                      [W, W, W, W, W, W, E],
                      [W, W, W, W, W, W, E],
                      [W, W, W, W, W, W, E],
                      [W, W, W, W, W, W, T]
                    ]
                  ]
                  </div>
                  <div class="d-none challenge-hints">
                    <div class="challenge-hint">
                      <h5>Hint 1</h5>
                      <p>
                        You're supposed to write the logic for your Robot in the box on the left, then click the run button, and see what happens in the simulator on the right.
                      </p>
                      <p>
                        The very first thing you should do is copy-paste the example code from the write-up in the beginning. What does the Robot do in the simulation, and can you guess which lines of code are responsible for what you see it do?
                      </p>
                    </div>
                    <hr />
                    <div class="challenge-hint">
                      <h5>Hint 2</h5>
                      <p>
                        The example code makes the Robot move forward three times and then turn around. Modify it to yield the actions that you need it to get to the green target.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!--section class="challenge-container row justify-content-center">
          <div class="challenge-question-container col-lg-12 col-xl-12">
            <div class="card border-secondary">
              <div class="card-header">
                <div class="float-left">
                  Challenge: Go around the map and reach the green target.
                </div>
                <div class="simulation-buttons btn-group float-right">
                  <div class="map-button btn-group mr-2">
                    <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Maps
                    </button>
                    <div class="dropdown-menu">
                    </div>
                  </div>
                  <button type="button" class="btn btn-secondary btn-sm hint-button mr-2" data-target="#hints-modal" data-toggle="modal">
                    Hints
                  </button>
                  <button class="btn btn-secondary btn-sm reset-button">
                    <i class="fas fa-redo"></i>
                  </button>
                  <button class="btn btn-success btn-sm run-button">
                    <i class="fas fa-play"></i>
                  </button>
                </div>
              </div>
              <div class="card-body p-0">
                <div class="row">
                  <div class="editor-container col-md-12 col-lg-6 pr-0">
                    <div class="editor-code-container"></div>
                    <code class="editor-output-container"></code>
                  </div>
                  <div class="simulation-container col-md-12 col-lg-6 px-0"></div>
                  <div class="grid-container">
                  [
                    [
                      [S, E, E, E, E, E, E],
                      [W, W, W, W, W, W, E],
                      [T, W, W, W, W, W, E],
                      [E, W, W, W, W, W, E],
                      [E, E, E, E, E, E, E]
                    ],
                    [
                      [S, E, E, E, E, E, E],
                      [W, W, W, W, W, W, E],
                      [W, W, W, W, W, W, E],
                      [W, W, W, W, W, W, E],
                      [W, W, W, W, W, W, T]
                    ]
                  ]
                  </div>
                  <div class="d-none challenge-hints">
                    <div class="challenge-hint">
                      <h5>Hint 1</h5>
                      <p>
                        You're supposed to write the logic for your Robot in the box on the left, then click the run button, and see what happens in the simulator on the right.
                      </p>
                      <p>
                        The very first thing you should do is copy-paste the example code from the write-up in the beginning. What does the Robot do in the simulation, and can you guess which lines of code are responsible for what you see it do?
                      </p>
                    </div>
                    <hr />
                    <div class="challenge-hint">
                      <h5>Hint 2</h5>
                      <p>
                        The example code makes the Robot move forward three times, then turn around, then repeat this process forever.
                      </p>
                      <p>
                        Try making the Robot not repeat this process forever by removing the line:
                      </p>
                      <p>
                        <code>while (true) {</code>
                      </p>
                      <p>
                        and the line that has the closing <code>}</code> for it:
                      </p>
                      <p>
                        <code>}</code>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section-->

      </div>

    </main>

    <div id="hints-modal" class="hints-modal modal fade" tabindex="-1" role="dialog" aria-labelledby="hintModal" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content text-justify">
          <div class="modal-header">
            <h4 class="modal-title" id="hints-modal-title">Hints</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <footer class="mt-5 pt-3 pb-5 bg-dark text-muted">
      <div class="container">
        <p class="float-right">
          <a href="#">Back to top</a>
        </p>
        <p>
          &copy; 2dbots.com &mdash;
          <a href="mailto:contact@2dbots.com">Contact</a>
        </p>
      </div>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', function() {

        initExamples();
        initDemos();
        initChallenges();

        // Bumper Bot
        let container = $('.robot-introduction-bumperbot');
        let simulation = $(container).find('.simulation-container').data('simulation');
        let moveForwardButton = $(container).find('.button-move-forward');
        let turnRightButton = $(container).find('.button-turn-right');
        let turnLeftButton = $(container).find('.button-turn-left');
        let senseForwardButton = $(container).find('.button-sense-forward');
        let robot = new Robot(simulation);
        simulation.addRobot(robot, 0, 2, 0);
        $(moveForwardButton).click(function(event) {
          simulation.moveForwardRobot(robot.robot_idx);
        });
        $(turnRightButton).click(function(event) {
          simulation.turnRightRobot(robot.robot_idx);
        });
        $(turnLeftButton).click(function(event) {
          simulation.turnLeftRobot(robot.robot_idx);
        });
        $(senseForwardButton).click(function(event) {
          let message = simulation.canMoveForwardRobot(robot.robot_idx) ? "True" : "False";
          $(senseForwardButton).popover('dispose');
          $(senseForwardButton).popover({
            content: message,
            placement: 'bottom'
          });
          $(senseForwardButton).popover('show');
          window.setTimeout(function() { $(senseForwardButton).popover('hide'); }, 1000);
        });

      });
    </script>
  </body>
</html>
